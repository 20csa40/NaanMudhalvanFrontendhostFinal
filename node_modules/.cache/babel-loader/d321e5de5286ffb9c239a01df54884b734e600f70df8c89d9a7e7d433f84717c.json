{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import'./Login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const LoginForm=()=>{const navigate=useNavigate();const[formData,setFormData]=useState({email:'',password:''});const[errors,setErrors]=useState({});const[apiError,setApiError]=useState('');const handleChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:value});};const handleSubmit=async e=>{e.preventDefault();const newErrors={};if(!formData.email){newErrors.email='Email is required';}if(!formData.password){newErrors.password='Password is required';}if(Object.keys(newErrors).length>0){setErrors(newErrors);return;}try{const response=await axios.post('http://localhost:8000/auth/login/',formData);if(response.status===200){sessionStorage.setItem(\"AuthToken\",response.data.authToken);navigate('/home');}}catch(error){if(error.response&&error.response.status===404){setApiError('User not found');navigate('/signup');}else{setApiError('Wrong Password');}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),apiError&&/*#__PURE__*/_jsx(\"div\",{className:\"api-error\",children:apiError}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",name:\"email\",value:formData.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",name:\"password\",value:formData.password,onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:errors.password})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.preventDefault();navigate(\"/signup\");},children:\"SignUp\"})]})]});};export default LoginForm;","map":{"version":3,"names":["React","useState","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","LoginForm","navigate","formData","setFormData","email","password","errors","setErrors","apiError","setApiError","handleChange","e","name","value","target","handleSubmit","preventDefault","newErrors","Object","keys","length","response","post","status","sessionStorage","setItem","data","authToken","error","className","children","onSubmit","type","placeholder","onChange","onClick"],"sources":["/home/divum/Documents/NaanMudhalvan/Frontend/Frontend-task-3/src/Components/LoginForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport './Login.css'; \n\nconst LoginForm = () => {\n  const navigate = useNavigate();\n\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n  });\n\n  const [errors, setErrors] = useState({});\n  const [apiError, setApiError] = useState('');\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value,\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const newErrors = {};\n\n    if (!formData.email) {\n      newErrors.email = 'Email is required';\n    }\n    if (!formData.password) {\n      newErrors.password = 'Password is required';\n    }\n\n    if (Object.keys(newErrors).length > 0) {\n      setErrors(newErrors);\n      return;\n    }\n\n    try {\n      const response = await axios.post('http://localhost:8000/auth/login/', formData);\n      \n      if (response.status === 200) {\n\n        sessionStorage.setItem(\"AuthToken\",response.data.authToken);\n        navigate('/home');\n      }\n    } catch (error) {\n      if (error.response && error.response.status === 404) {\n        setApiError('User not found');\n        navigate('/signup');\n      } else {\n        setApiError('Wrong Password');\n      }\n    }\n  };\n\n  return (\n    <div className=\"login-container\">\n      <h2>Login</h2>\n      {apiError && <div className=\"api-error\">{apiError}</div>}\n      <form onSubmit={handleSubmit}>\n        <div>\n          <input\n            type=\"email\"\n            placeholder=\"Email\"\n            name=\"email\"\n            value={formData.email}\n            onChange={handleChange}\n          />\n          <span className=\"error\">{errors.email}</span>\n        </div>\n        <div>\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            name=\"password\"\n            value={formData.password}\n            onChange={handleChange}\n          />\n          <span className=\"error\">{errors.password}</span>\n        </div>\n        <button type=\"submit\">Login</button>\n        <button onClick={(e)=>{\n          e.preventDefault()\n          navigate(\"/signup\")\n        }}>SignUp</button>\n      </form>\n    </div>\n  );\n};\n\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}