{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import\"./CartForm.css\";import Swal from'sweetalert2';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CartForm=()=>{const[cartProducts,setCartProducts]=useState([]);const navigate=useNavigate();useEffect(()=>{getCartProducts();},[]);const getCartProducts=async()=>{axios.get('http://localhost:8000/cart/getAllProducts/',{headers:{\"Authorization\":'Bearer '+sessionStorage.getItem(\"AuthToken\")}}).then(response=>{setCartProducts(response.data);});};const handleRemove=productId=>{axios.get(\"http://localhost:8000/cart/remove/\".concat(productId),{headers:{\"Authorization\":'Bearer '+sessionStorage.getItem(\"AuthToken\")}}).then(response=>{Swal.fire({icon:\"success\",text:response.data,confirmButtonColor:\"green\"}).then(()=>getCartProducts());}).catch(err=>{Swal.fire({icon:\"error\",title:\"Oops\",text:err.data,confirmButtonColor:\"red\"}).then(()=>getCartProducts());});};const handleProceedToBuy=()=>{if(cartProducts.length===0){Swal.fire({icon:\"info\",text:\"Your Cart Is Empty\",confirmButtonColor:\"#ff6600\"}).then(()=>{navigate(\"/home\");});}else{navigate('/shipping');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-head\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"Title\",children:\"Cart\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>{navigate(\"/home\");},children:\"Home\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:handleProceedToBuy,children:\"Proceed to Buy\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-products\",children:cartProducts.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"cart-product\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:8000/static/\"+product.imageSrc,alt:product.name}),/*#__PURE__*/_jsx(\"h3\",{children:product.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price:\",product.price]}),/*#__PURE__*/_jsx(\"p\",{children:product.description}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{handleRemove(product.id);},children:\"Remove\"})]},product.id))})]});};export default CartForm;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","Swal","jsx","_jsx","jsxs","_jsxs","CartForm","cartProducts","setCartProducts","navigate","getCartProducts","get","headers","sessionStorage","getItem","then","response","data","handleRemove","productId","concat","fire","icon","text","confirmButtonColor","catch","err","title","handleProceedToBuy","length","className","children","onClick","map","product","src","imageSrc","alt","name","price","description","id"],"sources":["/home/divum/Documents/NaanMudhalvan/Frontend/Frontend-task-3/src/Components/CartForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport \"./CartForm.css\"\nimport Swal from 'sweetalert2'\n\nconst CartForm = () => {\n  const [cartProducts, setCartProducts] = useState([]);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    getCartProducts()\n  }, []);\n\n\n  const getCartProducts=async ()=>{\n    axios.get('http://localhost:8000/cart/getAllProducts/', {\n      headers: {\n        \"Authorization\": 'Bearer ' + sessionStorage.getItem(\"AuthToken\")\n      }\n    }).then((response) => {\n      setCartProducts(response.data);\n    });\n  }\n\n\n  const handleRemove = (productId) => {\n    axios.get(`http://localhost:8000/cart/remove/${productId}`, {\n      headers: {\n        \"Authorization\": 'Bearer ' + sessionStorage.getItem(\"AuthToken\")\n      }\n    }).then(response => {\n      Swal.fire(\n        {\n          icon:\"success\",\n          text:response.data,\n          confirmButtonColor:\"green\"\n        }\n      ).then(()=>getCartProducts())\n    \n    }).catch(err => {\n      Swal.fire(\n        {\n          icon:\"error\",\n          title:\"Oops\",\n          text:err.data,\n          confirmButtonColor:\"red\"\n        }\n      ).then(()=>getCartProducts())\n    })\n  }\n\n  const handleProceedToBuy = () => {\n    if(cartProducts.length===0){\n      Swal.fire(\n        {\n          icon:\"info\",\n          text:\"Your Cart Is Empty\",\n          confirmButtonColor:\"#ff6600\"\n        }\n      ).then(()=>{\n        navigate(\"/home\")\n      })\n    }\n    else{\n      navigate('/shipping');\n    }\n  };\n\n  return (\n    <div className=\"cart-container\">\n      <div className='cart-head'>\n        <div>\n          <p className='Title'>Cart</p>\n        </div>\n        <div>\n          <button className='button' onClick={() => {\n            navigate(\"/home\")\n          }}>\n            Home\n          </button>\n        </div>\n        <div>\n          <button className='button' onClick={handleProceedToBuy}>Proceed to Buy</button>\n        </div>\n      </div>\n      <div className=\"cart-products\">\n        {cartProducts.map((product) => (\n          <div key={product.id} className=\"cart-product\">\n            <img src={\"http://localhost:8000/static/\" + product.imageSrc} alt={product.name} />\n            <h3>{product.name}</h3>\n            <p>Price:{product.price}</p>\n            <p>{product.description}</p>\n            <button onClick={() => {\n              handleRemove(product.id)\n            }}>Remove</button>\n          </div>\n\n        ))}\n      </div>\n\n    </div>\n  );\n};\n\nexport default CartForm;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,gBAAgB,CACvB,MAAO,CAAAC,IAAI,KAAM,aAAa,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE9B,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACrB,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAAAY,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAE9BD,SAAS,CAAC,IAAM,CACdY,eAAe,CAAC,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAGN,KAAM,CAAAA,eAAe,CAAC,KAAAA,CAAA,GAAU,CAC9BV,KAAK,CAACW,GAAG,CAAC,4CAA4C,CAAE,CACtDC,OAAO,CAAE,CACP,eAAe,CAAE,SAAS,CAAGC,cAAc,CAACC,OAAO,CAAC,WAAW,CACjE,CACF,CAAC,CAAC,CAACC,IAAI,CAAEC,QAAQ,EAAK,CACpBR,eAAe,CAACQ,QAAQ,CAACC,IAAI,CAAC,CAChC,CAAC,CAAC,CACJ,CAAC,CAGD,KAAM,CAAAC,YAAY,CAAIC,SAAS,EAAK,CAClCnB,KAAK,CAACW,GAAG,sCAAAS,MAAA,CAAsCD,SAAS,EAAI,CAC1DP,OAAO,CAAE,CACP,eAAe,CAAE,SAAS,CAAGC,cAAc,CAACC,OAAO,CAAC,WAAW,CACjE,CACF,CAAC,CAAC,CAACC,IAAI,CAACC,QAAQ,EAAI,CAClBf,IAAI,CAACoB,IAAI,CACP,CACEC,IAAI,CAAC,SAAS,CACdC,IAAI,CAACP,QAAQ,CAACC,IAAI,CAClBO,kBAAkB,CAAC,OACrB,CACF,CAAC,CAACT,IAAI,CAAC,IAAIL,eAAe,CAAC,CAAC,CAAC,CAE/B,CAAC,CAAC,CAACe,KAAK,CAACC,GAAG,EAAI,CACdzB,IAAI,CAACoB,IAAI,CACP,CACEC,IAAI,CAAC,OAAO,CACZK,KAAK,CAAC,MAAM,CACZJ,IAAI,CAACG,GAAG,CAACT,IAAI,CACbO,kBAAkB,CAAC,KACrB,CACF,CAAC,CAACT,IAAI,CAAC,IAAIL,eAAe,CAAC,CAAC,CAAC,CAC/B,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAkB,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,GAAGrB,YAAY,CAACsB,MAAM,GAAG,CAAC,CAAC,CACzB5B,IAAI,CAACoB,IAAI,CACP,CACEC,IAAI,CAAC,MAAM,CACXC,IAAI,CAAC,oBAAoB,CACzBC,kBAAkB,CAAC,SACrB,CACF,CAAC,CAACT,IAAI,CAAC,IAAI,CACTN,QAAQ,CAAC,OAAO,CAAC,CACnB,CAAC,CAAC,CACJ,CAAC,IACG,CACFA,QAAQ,CAAC,WAAW,CAAC,CACvB,CACF,CAAC,CAED,mBACEJ,KAAA,QAAKyB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B1B,KAAA,QAAKyB,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB5B,IAAA,QAAA4B,QAAA,cACE5B,IAAA,MAAG2B,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,MAAI,CAAG,CAAC,CAC1B,CAAC,cACN5B,IAAA,QAAA4B,QAAA,cACE5B,IAAA,WAAQ2B,SAAS,CAAC,QAAQ,CAACE,OAAO,CAAEA,CAAA,GAAM,CACxCvB,QAAQ,CAAC,OAAO,CAAC,CACnB,CAAE,CAAAsB,QAAA,CAAC,MAEH,CAAQ,CAAC,CACN,CAAC,cACN5B,IAAA,QAAA4B,QAAA,cACE5B,IAAA,WAAQ2B,SAAS,CAAC,QAAQ,CAACE,OAAO,CAAEJ,kBAAmB,CAAAG,QAAA,CAAC,gBAAc,CAAQ,CAAC,CAC5E,CAAC,EACH,CAAC,cACN5B,IAAA,QAAK2B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAC3BxB,YAAY,CAAC0B,GAAG,CAAEC,OAAO,eACxB7B,KAAA,QAAsByB,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC5C5B,IAAA,QAAKgC,GAAG,CAAE,+BAA+B,CAAGD,OAAO,CAACE,QAAS,CAACC,GAAG,CAAEH,OAAO,CAACI,IAAK,CAAE,CAAC,cACnFnC,IAAA,OAAA4B,QAAA,CAAKG,OAAO,CAACI,IAAI,CAAK,CAAC,cACvBjC,KAAA,MAAA0B,QAAA,EAAG,QAAM,CAACG,OAAO,CAACK,KAAK,EAAI,CAAC,cAC5BpC,IAAA,MAAA4B,QAAA,CAAIG,OAAO,CAACM,WAAW,CAAI,CAAC,cAC5BrC,IAAA,WAAQ6B,OAAO,CAAEA,CAAA,GAAM,CACrBd,YAAY,CAACgB,OAAO,CAACO,EAAE,CAAC,CAC1B,CAAE,CAAAV,QAAA,CAAC,QAAM,CAAQ,CAAC,GAPVG,OAAO,CAACO,EAQb,CAEN,CAAC,CACC,CAAC,EAEH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnC,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}